<mxfile host="app.diagrams.net">
  <diagram name="BMC - Microservices Detail" id="microservices">
    <mxGraphModel dx="1800" dy="1000" grid="1" gridSize="10">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="BMC Microservices - ECS Fargate" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#232F3E;strokeColor=none;fontColor=#FFFFFF;fontSize=18;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="50" y="20" width="1500" height="50" as="geometry"/>
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="api" value="API Gateway&#10;Central Router" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#FF4F8B;gradientDirection=north;fillColor=#BC1356;strokeColor=#ffffff;shape=mxgraph.aws4.api_gateway;" vertex="1" parent="1">
          <mxGeometry x="400" y="120" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <!-- ECS Cluster -->
        <mxCell id="cluster" value="ECS Fargate Cluster - Auto Scaling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;strokeWidth=2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="200" width="1200" height="300" as="geometry"/>
        </mxCell>
        
        <!-- Invoice Service -->
        <mxCell id="invoice_alb" value="Invoice ALB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#8C4FFF;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;shape=mxgraph.aws4.application_load_balancer;" vertex="1" parent="1">
          <mxGeometry x="200" y="250" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="invoice1" value="Invoice Task 1&#10;2vCPU/4GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="150" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="invoice2" value="Invoice Task 2&#10;2vCPU/4GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="250" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <!-- Product Service -->
        <mxCell id="product_alb" value="Product ALB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#8C4FFF;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;shape=mxgraph.aws4.application_load_balancer;" vertex="1" parent="1">
          <mxGeometry x="500" y="250" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="product1" value="Product Task 1&#10;4vCPU/8GB&#10;60M Records" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="400" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="product2" value="Product Task 2&#10;4vCPU/8GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="500" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="product3" value="Product Task 3&#10;4vCPU/8GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="600" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <!-- OCR Service -->
        <mxCell id="ocr_alb" value="OCR ALB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#8C4FFF;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;shape=mxgraph.aws4.application_load_balancer;" vertex="1" parent="1">
          <mxGeometry x="800" y="250" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="ocr1" value="OCR Task 1&#10;2vCPU/4GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="750" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="ocr2" value="OCR Task 2&#10;2vCPU/4GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;shape=mxgraph.aws4.fargate;" vertex="1" parent="1">
          <mxGeometry x="850" y="350" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <!-- Data Services -->
        <mxCell id="data" value="Data Services - Multi-AZ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#E91E63;strokeWidth=2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="550" width="800" height="150" as="geometry"/>
        </mxCell>
        
        <mxCell id="rds" value="RDS PostgreSQL&#10;Multi-AZ&#10;60M Products" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#4AB29A;gradientDirection=north;fillColor=#116D5B;strokeColor=#ffffff;shape=mxgraph.aws4.rds;" vertex="1" parent="1">
          <mxGeometry x="200" y="600" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="redis" value="ElastiCache Redis&#10;Cluster Mode&#10;24h TTL" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#4AB29A;gradientDirection=north;fillColor=#116D5B;strokeColor=#ffffff;shape=mxgraph.aws4.elasticache;" vertex="1" parent="1">
          <mxGeometry x="400" y="600" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="s3" value="S3 Documents&#10;Intelligent Tiering" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=#60A337;gradientDirection=north;fillColor=#277116;strokeColor=#ffffff;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="600" y="600" width="35" height="35" as="geometry"/>
        </mxCell>
        
        <!-- Connections -->
        <mxCell id="c1" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="api" target="invoice_alb"/>
        <mxCell id="c2" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="api" target="product_alb"/>
        <mxCell id="c3" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="api" target="ocr_alb"/>
        
        <mxCell id="c4" style="endArrow=classic;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="invoice_alb" target="invoice1"/>
        <mxCell id="c5" style="endArrow=classic;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="invoice_alb" target="invoice2"/>
        
        <mxCell id="c6" style="endArrow=classic;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="product_alb" target="product1"/>
        <mxCell id="c7" style="endArrow=classic;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="product_alb" target="product2"/>
        <mxCell id="c8" style="endArrow=classic;html=1;strokeColor=#9C27B0;strokeWidth=2;" edge="1" parent="1" source="product_alb" target="product3"/>
        
        <mxCell id="c9" style="endArrow=classic;html=1;strokeColor=#E91E63;strokeWidth=2;" edge="1" parent="1" source="product1" target="redis"/>
        <mxCell id="c10" style="endArrow=classic;html=1;strokeColor=#E91E63;strokeWidth=2;" edge="1" parent="1" source="redis" target="rds"/>
        <mxCell id="c11" style="endArrow=classic;html=1;strokeColor=#E91E63;strokeWidth=2;" edge="1" parent="1" source="ocr1" target="s3"/>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>