{
  "network_architecture": {
    "metadata": {
      "title": "BMC_INPUT - Network Architecture & VPC",
      "type": "network",
      "canvas": { "width": 2500, "height": 1600 }
    },
    "layout": {
      "algorithm": "hierarchical",
      "direction": "top_to_bottom",
      "spacing": { "horizontal": 150, "vertical": 100 }
    },
    "components": [
      {
        "id": "internet",
        "type": "aws4.internet_gateway",
        "label": "Internet",
        "layer": "external",
        "auto_position": true
      },
      {
        "id": "users",
        "type": "aws4.users", 
        "label": "BMC Users\\n10K concurrent",
        "layer": "external",
        "auto_position": true
      },
      {
        "id": "aws_cloud",
        "type": "container",
        "label": "AWS Cloud - us-east-1",
        "style": { "fillColor": "#E3F2FD", "strokeColor": "#1976D2" },
        "children": [
          {
            "id": "vpc",
            "type": "container", 
            "label": "VPC 10.0.0.0/16",
            "children": [
              {
                "id": "az_a",
                "type": "availability_zone",
                "label": "AZ us-east-1a",
                "children": [
                  {
                    "id": "public_subnet_a",
                    "type": "public_subnet",
                    "label": "Public Subnet\\n10.0.1.0/24",
                    "components": [
                      { "id": "nat_1a", "type": "aws4.elastic_load_balancing", "label": "NAT Gateway 1A" }
                    ]
                  },
                  {
                    "id": "private_subnet_a", 
                    "type": "private_subnet",
                    "label": "Private Subnet\\n10.0.10.0/24",
                    "components": [
                      { "id": "app_1a", "type": "aws4.fargate", "label": "App Services 1A" }
                    ]
                  },
                  {
                    "id": "isolated_subnet_a",
                    "type": "isolated_subnet", 
                    "label": "Isolated Subnet\\n10.0.20.0/24",
                    "components": [
                      { "id": "db_1a", "type": "aws4.rds", "label": "RDS Primary\\nus-east-1a" }
                    ]
                  }
                ]
              },
              {
                "id": "az_b",
                "type": "availability_zone",
                "label": "AZ us-east-1b", 
                "children": [
                  {
                    "id": "isolated_subnet_b",
                    "type": "isolated_subnet",
                    "label": "Isolated Subnet\\n10.0.21.0/24",
                    "components": [
                      { "id": "db_1b", "type": "aws4.rds", "label": "RDS Standby\\nus-east-1b" }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "id": "edge_layer",
            "type": "container",
            "label": "Edge Layer",
            "components": [
              { "id": "cloudfront", "type": "aws4.cloudfront", "label": "CloudFront CDN\\nGlobal Edge" },
              { "id": "waf", "type": "aws4.waf", "label": "AWS WAF\\nDDoS Protection" }
            ]
          },
          {
            "id": "api_layer",
            "type": "container", 
            "label": "API Layer",
            "components": [
              { "id": "api_gateway", "type": "aws4.api_gateway", "label": "API Gateway\\nREST + GraphQL" },
              { "id": "cognito", "type": "aws4.cognito", "label": "Cognito\\nUser Pool" },
              { "id": "alb", "type": "aws4.elastic_load_balancing", "label": "Application LB\\nMulti-AZ" }
            ]
          }
        ]
      }
    ],
    "connections": [
      { "from": "users", "to": "internet", "style": "primary" },
      { "from": "internet", "to": "cloudfront", "style": "primary" },
      { "from": "cloudfront", "to": "waf", "style": "security" },
      { "from": "waf", "to": "api_gateway", "style": "primary" },
      { "from": "api_gateway", "to": "cognito", "style": "secondary" },
      { "from": "api_gateway", "to": "alb", "style": "primary" },
      { "from": "alb", "to": "app_1a", "style": "data" },
      { "from": "app_1a", "to": "db_1a", "style": "data" },
      { "from": "db_1a", "to": "db_1b", "style": "monitoring" }
    ]
  }
}
